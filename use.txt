package com.example.service;

import com.dfs.mktsvcs.crsejb.ao.ObjectFactory;
import com.dfs.mktsvcs.crsejb.ao.VariableListInputVO;
import com.dfs.mktsvcs.crsejb.ao.VariableListOutputVO;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.ws.client.core.WebServiceTemplate;

import javax.xml.bind.JAXBElement;

@Service
public class SoapClientService {

    @Autowired
    private WebServiceTemplate webServiceTemplate;

    private static final String SOAP_ENDPOINT_URL = "http://example.com/wsdl-endpoint";

    public VariableListOutputVO getVariableList(VariableListInputVO inputVO) {
        ObjectFactory objectFactory = new ObjectFactory();
        JAXBElement<VariableListInputVO> jaxbElement = objectFactory.createVariableListInputVO(inputVO);

        return (VariableListOutputVO) webServiceTemplate.marshalSendAndReceive(SOAP_ENDPOINT_URL, jaxbElement);
    }
}
